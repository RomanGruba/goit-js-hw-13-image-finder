{"version":3,"sources":["webpack:///./templates/cards.hbs","webpack:///./js/apiService.js","webpack:///./index.js","webpack:///./templates/form.hbs"],"names":["Handlebars","__webpack_require__","module","exports","template","1","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","helperMissing","alias3","alias4","escapeExpression","webformatURL","call","name","hash","largeImageURL","pageURL","likes","views","comments","downloads","compiler","main","stack1","each","fn","program","inverse","noop","useData","apiService","pageNumber","per_page","query","getUrl","baseUrl","this","fetchImg","_this","fetch","then","response","json","incrementPage","hits","searchQuery","str","resetPage","_callee2","fetchAnswer","markup","regeneratorRuntime","wrap","_context2","prev","next","refs","spinner","classList","add","imgService","sent","cards","gallery","insertAdjacentHTML","remove","stop","document","querySelector","moreBtn","queryBtn","form","addEventListener","_asyncToGenerator","mark","_callee","_context","renderCards","top","window","innerHeight","scrollBy","behavior","innerHTML","newQuery","value","e","target","nodeName","instance","basicLightbox","dataset","url","source","show","modalWindow","InfiniteScroll","path","responseType","history","on"],"mappings":"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","file":"main.7106e59d8f0d288f7dba.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<li class=\\\"photo__item\\\">\\r\\n\\r\\n  <div class=\\\"photo-card\\\">\\r\\n\\r\\n    <img src=\\\"\"\n    + alias4(((helper = (helper = helpers.webformatURL || (depth0 != null ? depth0.webformatURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" alt=\\\"\\\" data-source=\\\"\"\n    + alias4(((helper = (helper = helpers.largeImageURL || (depth0 != null ? depth0.largeImageURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" data-url=\\\"\"\n    + alias4(((helper = (helper = helpers.pageURL || (depth0 != null ? depth0.pageURL : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"pageURL\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"/>\\r\\n\\r\\n    <div class=\\\"stats\\\">\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n        \"\n    + alias4(((helper = (helper = helpers.likes || (depth0 != null ? depth0.likes : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">visibility</i>\\r\\n        \"\n    + alias4(((helper = (helper = helpers.views || (depth0 != null ? depth0.views : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">comment</i>\\r\\n        \"\n    + alias4(((helper = (helper = helpers.comments || (depth0 != null ? depth0.comments : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n      </p>\\r\\n      <p class=\\\"stats-item\\\">\\r\\n        <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n        \"\n    + alias4(((helper = (helper = helpers.downloads || (depth0 != null ? depth0.downloads : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\r\\n      </p>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n</li>\\r\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers.each.call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\");\n},\"useData\":true});","export default {\r\n  pageNumber: 1,\r\n  per_page: 12,\r\n  query: '',\r\n  getUrl(pageNumber) {\r\n    const baseUrl = 'https://pixabay.com/api/';\r\n    const key = '13241537-06d8871706b8937518ecf25ca';\r\n    return `${baseUrl}?image_type=photo&orientation=horizontal&q=${\r\n      this.query\r\n    }&page=${pageNumber}&per_page=${this.per_page}&key=${key}`\r\n  },\r\n  fetchImg() {\r\n\r\n\r\n    return fetch(\r\n      this.getUrl(this.pageNumber),\r\n    )\r\n      .then(response => response.json())\r\n      .then(response => {\r\n        this.incrementPage();\r\n        return response.hits;\r\n      });\r\n  },\r\n  get searchQuery() {\r\n    return this.query;\r\n  },\r\n\r\n  set searchQuery(str) {\r\n    this.query = str;\r\n  },\r\n\r\n  incrementPage() {\r\n    this.pageNumber += 1;\r\n  },\r\n\r\n  resetPage() {\r\n    this.pageNumber = 1;\r\n  }\r\n};\r\n","import './styles.css';\r\nimport 'basiclightbox/dist/basicLightbox.min.css';\r\nimport * as basicLightbox from 'basiclightbox';\r\nimport InfiniteScroll from 'infinite-scroll';\r\n\r\nimport form from './templates/form.hbs';\r\n\r\nimport cards from './templates/cards.hbs';\r\nimport imgService from './js/apiService';\r\n\r\nconst refs = {\r\n  gallery: document.querySelector('.gallery'),\r\n  spinner: document.querySelector('.spinner'),\r\n  moreBtn: document.querySelector('#moreBtn'),\r\n  queryBtn: document.querySelector('#queryBtn'),\r\n};\r\n\r\nrenderForm();\r\n\r\nrefs.moreBtn.addEventListener('click', async () => {\r\n  await renderCards();\r\n  scroll();\r\n});\r\n\r\nrefs.queryBtn.addEventListener('click', queryUpdate);\r\n\r\n\r\n\r\nrefs.gallery.addEventListener('click', e => modalWindow(e));\r\n\r\nfunction renderForm() {\r\n  document.querySelector('.query').insertAdjacentHTML('afterbegin', form());\r\n}\r\n\r\nasync function renderCards(query) {\r\n  refs.spinner.classList.add('isActive');\r\n  const fetchAnswer = await imgService.fetchImg(query);\r\n  const markup = cards(fetchAnswer);\r\n  refs.gallery.insertAdjacentHTML('beforeEnd', markup);\r\n  refs.spinner.classList.remove('isActive');\r\n}\r\n\r\nfunction queryUpdate() {\r\n  imgService.resetPage();\r\n  refs.gallery.innerHTML = '';\r\n  const newQuery = document.querySelector('input[name=\"query\"]').value;\r\n  imgService.searchQuery = newQuery;\r\n  renderCards(newQuery);\r\n}\r\n\r\nfunction scroll() {\r\n  let top = window.innerHeight - 50;\r\n  window.scrollBy({\r\n    top: top,\r\n    behavior: 'smooth',\r\n  });\r\n}\r\n\r\nfunction modalWindow(e) {\r\n  if (e.target.nodeName === 'IMG') {\r\n    const instance = basicLightbox.create(`\r\n  <a href=${e.target.dataset.url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n  <img width=\"1400\" height=\"900\" src=${e.target.dataset.source}>\r\n  </a>\r\n`);\r\n\r\n    instance.show();\r\n  }\r\n}\r\n\r\nconst infScroll = new InfiniteScroll(refs.gallery, {\r\n  path: 'page/{{#}}',\r\n  responseType: 'text',\r\n  history: false,\r\n});\r\n\r\ninfScroll.on('load', () => {\r\n  imgService.incrementPage();\r\n  renderCards();\r\n});\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<form class=\\\"search-form\\\" id=\\\"search-form\\\">\\r\\n  <input\\r\\n    type=\\\"text\\\"\\r\\n    name=\\\"query\\\"\\r\\n    autocomplete=\\\"off\\\"\\r\\n    placeholder=\\\"Search images...\\\"\\r\\n  />\\r\\n</form>\\r\\n\";\n},\"useData\":true});"],"sourceRoot":""}